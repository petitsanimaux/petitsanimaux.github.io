{"version":3,"file":"component---src-templates-cart-js-054dfe1ea78c0ee379b1.js","mappings":"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","sources":["webpack://crochetnest/./node_modules/@stripe/stripe-js/dist/stripe.esm.js","webpack://crochetnest/./src/layout/components/Checkout/index.js","webpack://crochetnest/./src/layout/components/CartItem/index.js","webpack://crochetnest/./src/layout/pages/Cart/index.js","webpack://crochetnest/./src/templates/cart.js"],"sourcesContent":["var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"1.52.1\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      }\n\n      script.addEventListener('load', function () {\n        if (window.Stripe) {\n          resolve(window.Stripe);\n        } else {\n          reject(new Error('Stripe.js not available'));\n        }\n      });\n      script.addEventListener('error', function () {\n        reject(new Error('Failed to load Stripe.js'));\n      });\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  });\n  return stripePromise;\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n// own script injection.\n\nvar stripePromise$1 = Promise.resolve().then(function () {\n  return loadScript(null);\n});\nvar loadCalled = false;\nstripePromise$1[\"catch\"](function (err) {\n  if (!loadCalled) {\n    console.warn(err);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now();\n  return stripePromise$1.then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","import * as React from \"react\";\nimport { Button } from '@chakra-ui/react';\nimport {loadStripe} from '@stripe/stripe-js';\n\nconst SHIPPING_PRICE_ID = \"price_1Na90aBLdrhwtT8MK1dBtUmy\";\n\nfunction CheckoutButton(props) {\n    const {lineItems} = props;\n    const [stripe, setStripe] = React.useState(null);\n\n    React.useEffect(() => {\n        async function fetchStripe() {\n            const stripeObj = await loadStripe('pk_live_51MbzZWBLdrhwtT8MQVnLB1gU0MwJOrOtPZDvLSoUNHryAm0P1je9wct7pWxtNmEhhxtOazi64BrcuF7jptOvZnVj00fSmORI80');\n            setStripe(stripeObj);\n        }\n        fetchStripe();\n    }, []);\n\n    const checkout = async () => {\n        if (!stripe) {\n            return;\n        }\n\n        const { error } = await stripe.redirectToCheckout({\n            lineItems: [{\n                price: SHIPPING_PRICE_ID,\n                quantity: 1,\n            }, ...lineItems],\n            mode: 'payment',\n            billingAddressCollection: 'required',\n            shippingAddressCollection: {\n                allowedCountries: ['US'],\n            },\n            successUrl: 'https://crochetnest.com/success',\n            cancelUrl: 'https://crochetnest.com/',\n        });\n    };\n\n    return (\n        <Button variant={'pink'} \n            disabled={!stripe || lineItems.length === 0} \n            onClick={checkout}>Checkout</Button>\n    );\n};\n\nexport default CheckoutButton;","import React from \"react\";\nimport { H2, H3 } from \"../Header\";\nimport { GatsbyImage} from \"gatsby-plugin-image\";\n\nimport \"./styles.scss\";\n\nconst CartItem = (props) => {\n    const { product, updateQuantity, priceId, id, quantity } = props;\n    const { name, price, priceIds } = product;\n    const variation = priceIds.find(price => price.id === priceId);\n\n    return (\n        <div className=\"PetitsAnimauxCartItem\">\n            <div className=\"PetitsAnimauxCardImage\">\n                <GatsbyImage\n                    image={product.gatsbyImages[0]}\n                    alt={name}\n                />\n            </div>\n\n            <div className=\"PetitsAnimauxCardTitleHeader\">\n                <H2  size='sm' fontSize='24px' noOfLines={2}>{variation.nickname}</H2>\n                <H3  size='sm' fontSize='20px'>${price}</H3>\n            </div>\n\n            <div className=\"PetitsAnimauxCartQuantityControllerContainer\">\n                <button className=\"PetitsAnimauxCartQuantityButton\" onClick={() => {\n                    updateQuantity(priceId, id, quantity - 1);\n                }}>-</button>\n                <div className=\"PetitsAnimauxCartQuantityInput\">{quantity}</div>\n                <button className=\"PetitsAnimauxCartQuantityButton\" onClick={() => {\n                    updateQuantity(priceId, id, quantity + 1);\n                }}>+</button>\n            </div>\n        </div>\n    );\n}\n\nexport default CartItem;","import React, { useContext } from \"react\";\n\nimport { H2 } from \"../../components/Header\";\nimport Checkout from \"../../components/Checkout\";\nimport CartItem from \"../../components/CartItem\";\n\nimport cartContext from \"../../../context/cartContext\";\n\nimport \"./styles.scss\";\n\nconst Cart = (props) => {\n    const { products } = props;\n    const { cart, updateQuantity} = useContext(cartContext);\n\n    if (cart.length === 0) {\n        return (\n            <div className=\"CartPage\">\n                Add some items to your cart!\n            </div>\n        );\n    }\n\n    const sanitizedCart = cart.filter((cartItem) => {\n        const product = products.find(product => product.id === cartItem.id);\n        if (!product) {\n            return false;\n        }\n\n        const variation = product.priceIds.find(price => price.id === cartItem.priceId);\n        return variation;\n    });\n\n    const totalPrice = sanitizedCart.reduce((total, cartItem) => {\n        const product = products.find(product => product.id === cartItem.id);\n        return total + (cartItem.quantity * product.price);\n    }, 0);\n\n    return (\n        <div className=\"CartPage\">\n            {sanitizedCart.map(item => {\n                const {id, priceId, quantity} = item;\n                const product = products.find(product => product.id === id);\n\n                return (\n                    <CartItem \n                        key={id} \n                        id={id} \n                        priceId={priceId} \n                        quantity={quantity}\n                        product={product}\n                        updateQuantity={updateQuantity}\n                    />\n                );\n            })}\n\n            <div className=\"TotalPrice\">\n                <H2>Total: ${totalPrice}</H2>\n            </div>\n\n            <Checkout lineItems={cart.map(item => ({price: item.priceId, quantity: item.quantity}))}/>\n        </div>\n    );\n};\n\nexport default Cart;","import { graphql } from \"gatsby\";\n\nimport React from \"react\";\nimport CommonHead from \"../layout/Head\";\nimport Cart from \"../layout/pages/Cart\";\nimport MainSectionWrapper from \"../layout\";\nimport { parseAllGoogleSpreadsheetPetitsAnimauxProductsResponse, } from '../graphql/products';\n\nconst PageTemplate = (props) => {\n  const products = parseAllGoogleSpreadsheetPetitsAnimauxProductsResponse(props.data);\n\n    return (\n      <MainSectionWrapper>\n        <Cart products={products} />\n      </MainSectionWrapper>\n    )\n};\n\nexport function Head(props) {\n    // const {\n    //     allGoogleSpreadsheetPetitsAnimauxProducts,\n    // } = props.data;\n    // const node = allGoogleSpreadsheetPetitsAnimauxProducts.nodes[0];\n\n    // const data = {\n    //     page: {\n    //         name: node.name,\n    //     }\n    // };\n\n    // return <CommonHead {...props} data={data} />;\n}\n\nexport const query = graphql`\nquery PetitsAnimauxProduct {\n  allGoogleSpreadsheetPetitsAnimauxProducts {\n    edges {\n      node {\n        id\n        title\n        description\n        price\n        etsyAffiliateLink\n        prices\n        currencyCode\n        quantity\n        tags\n        materials\n        images\n        urlSuffix\n        variations\n        image1Gatsby {\n          childImageSharp {\n            gatsbyImageData(width: 400)\n          }\n        }\n        image2Gatsby {\n          childImageSharp {\n            gatsbyImageData(width: 400)\n          }\n        }\n        image3Gatsby {\n          childImageSharp {\n            gatsbyImageData(width: 400)\n          }\n        }\n        image4Gatsby {\n          childImageSharp {\n            gatsbyImageData(width: 400)\n          }\n        }\n        image5Gatsby {\n          childImageSharp {\n            gatsbyImageData(width: 400)\n          }\n        }\n        image6Gatsby {\n          childImageSharp {\n            gatsbyImageData(width: 400)\n          }\n        }\n        image7Gatsby {\n          childImageSharp {\n            gatsbyImageData(width: 400)\n          }\n        }\n        image8Gatsby {\n          childImageSharp {\n            gatsbyImageData(width: 400)\n          }\n        }\n        image9Gatsby {\n          childImageSharp {\n            gatsbyImageData(width: 400)\n          }\n        }\n        image10Gatsby {\n          childImageSharp {\n            gatsbyImageData(width: 400)\n          }\n        }\n      }\n    }\n  }\n}\n`;\n\nexport default PageTemplate;"],"names":["V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","stripePromise","loadScript","params","Promise","resolve","reject","window","document","Stripe","console","warn","script","scripts","querySelectorAll","concat","i","length","test","src","findScript","queryString","advancedFraudSignals","createElement","headOrBody","head","body","Error","appendChild","injectScript","addEventListener","error","stripePromise$1","then","loadCalled","err","SHIPPING_PRICE_ID","props","lineItems","stripe","setStripe","React","async","stripeObj","_len","arguments","args","Array","_key","startTime","Date","now","maybeStripe","apply","undefined","_registerWrapper","name","version","registerWrapper","initStripe","loadStripe","fetchStripe","Button","variant","disabled","onClick","redirectToCheckout","price","quantity","_toConsumableArray","mode","billingAddressCollection","shippingAddressCollection","allowedCountries","successUrl","cancelUrl","product","updateQuantity","priceId","id","priceIds","variation","find","className","GatsbyImage","image","gatsbyImages","alt","H2","size","fontSize","noOfLines","nickname","H3","products","cart","useContext","cartContext","sanitizedCart","filter","cartItem","totalPrice","reduce","total","map","item","CartItem","key","Checkout","Head","parseAllGoogleSpreadsheetPetitsAnimauxProductsResponse","data","MainSectionWrapper","Cart"],"sourceRoot":""}