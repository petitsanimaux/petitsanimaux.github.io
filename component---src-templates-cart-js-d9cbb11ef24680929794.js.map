{"version":3,"file":"component---src-templates-cart-js-d9cbb11ef24680929794.js","mappings":"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","sources":["webpack://crochetnest/./src/layout/components/Button/index.js","webpack://crochetnest/./node_modules/@stripe/stripe-js/dist/stripe.esm.js","webpack://crochetnest/./src/layout/components/Checkout/index.js","webpack://crochetnest/./src/layout/components/CartItem/index.js","webpack://crochetnest/./src/layout/pages/Cart/index.js","webpack://crochetnest/./src/templates/cart.js"],"sourcesContent":["import * as React from \"react\";\n\nimport { Button as ChakraButton, Link } from '@chakra-ui/react'\n\nimport \"./styles.scss\";\n\nconst LinkButton = (props) => {\n    return (\n        <Link {...props}>\n            {props.children}\n        </Link>\n    );\n};\n\nconst Button = (props) => {\n    return (\n        <button className=\"Button\" {...props}>\n            {props.children}\n        </button>\n    );\n};\n\nexport {\n    LinkButton, \n    Button\n}\nexport default Button;","var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"1.52.1\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      }\n\n      script.addEventListener('load', function () {\n        if (window.Stripe) {\n          resolve(window.Stripe);\n        } else {\n          reject(new Error('Stripe.js not available'));\n        }\n      });\n      script.addEventListener('error', function () {\n        reject(new Error('Failed to load Stripe.js'));\n      });\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  });\n  return stripePromise;\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n// own script injection.\n\nvar stripePromise$1 = Promise.resolve().then(function () {\n  return loadScript(null);\n});\nvar loadCalled = false;\nstripePromise$1[\"catch\"](function (err) {\n  if (!loadCalled) {\n    console.warn(err);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now();\n  return stripePromise$1.then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","import * as React from \"react\";\nimport Button from \"../Button\";\nimport {loadStripe} from '@stripe/stripe-js';\n\nconst SHIPPING_PRICE_ID = \"price_1Na90aBLdrhwtT8MK1dBtUmy\";\n\nfunction CheckoutButton(props) {\n    const {lineItems} = props;\n    const [stripe, setStripe] = React.useState(null);\n\n    React.useEffect(() => {\n        async function fetchStripe() {\n            const stripeObj = await loadStripe('pk_live_51MbzZWBLdrhwtT8MQVnLB1gU0MwJOrOtPZDvLSoUNHryAm0P1je9wct7pWxtNmEhhxtOazi64BrcuF7jptOvZnVj00fSmORI80');\n            setStripe(stripeObj);\n        }\n        fetchStripe();\n    }, []);\n\n    const checkout = async () => {\n        if (!stripe) {\n            return;\n        }\n\n        const { error } = await stripe.redirectToCheckout({\n            lineItems: [{\n                price: SHIPPING_PRICE_ID,\n                quantity: 1,\n            }, ...lineItems],\n            mode: 'payment',\n            billingAddressCollection: 'required',\n            shippingAddressCollection: {\n                allowedCountries: ['US'],\n            },\n            successUrl: 'https://crochetnest.com/success',\n            cancelUrl: 'https://crochetnest.com/',\n        });\n    };\n\n    return (\n        <Button disabled={!stripe || lineItems.length === 0} onClick={checkout}>Checkout</Button>\n    );\n};\n\nexport default CheckoutButton;","import React from \"react\";\nimport { H2, H3 } from \"../Header\";\nimport { GatsbyImage, getImage } from \"gatsby-plugin-image\";\n\nimport \"./styles.scss\";\n\nconst CartItem = (props) => {\n    const {product, updateQuantity, priceId, id, quantity} = props;\n    const { name, price} = product;\n\n    return (\n        <div className=\"PetitsAnimauxCartItem\">\n            <div className=\"PetitsAnimauxCardImage\">\n                <GatsbyImage\n                    image={product.gatsbyImages[0]}\n                    alt={name}\n                />\n            </div>\n\n            <div className=\"PetitsAnimauxCardTitleHeader\">\n                <H2>{name}</H2>\n                <H3>${price}</H3>\n            </div>\n\n            <div className=\"PetitsAnimauxCartQuantityControllerContainer\">\n                <button className=\"PetitsAnimauxCartQuantityButton\" onClick={() => {\n                    updateQuantity(priceId, id, quantity - 1);\n                }}>-</button>\n                <div className=\"PetitsAnimauxCartQuantityInput\">{quantity}</div>\n                <button className=\"PetitsAnimauxCartQuantityButton\" onClick={() => {\n                    updateQuantity(priceId, id, quantity + 1);\n                }}>+</button>\n            </div>\n        </div>\n    );\n}\n\nexport default CartItem;","import React, { useContext } from \"react\";\n\nimport { H2 } from \"../../components/Header\";\nimport Checkout from \"../../components/Checkout\";\nimport CartItem from \"../../components/CartItem\";\n\nimport cartContext from \"../../../context/cartContext\";\n\nimport \"./styles.scss\";\n\nconst Cart = (props) => {\n    const { products } = props;\n    const { cart, updateQuantity} = useContext(cartContext);\n\n    if (cart.length === 0) {\n        return (\n            <div className=\"CartPage\">\n                Add some items to your cart!\n            </div>\n        );\n    }\n\n    const totalPrice = cart.reduce((total, item) => {\n        const product = products.find(product => product.id === item.id);\n        return total + (item.quantity * product.price);\n    }, 0);\n\n\n    return (\n        <div className=\"CartPage\">\n            {cart.map(item => {\n                const {id, priceId, quantity} = item;\n                const product = products.find(product => product.id === id);\n\n                return (\n                    <CartItem \n                        key={id} \n                        id={id} \n                        priceId={priceId} \n                        quantity={quantity}\n                        product={product}\n                        updateQuantity={updateQuantity}\n                    />\n                );\n            })}\n\n            <div className=\"TotalPrice\">\n                <H2>Total: ${totalPrice}</H2>\n            </div>\n\n            <Checkout lineItems={cart.map(item => ({price: item.priceId, quantity: item.quantity}))}/>\n        </div>\n    );\n};\n\nexport default Cart;","import { graphql } from \"gatsby\";\n\nimport React from \"react\";\nimport CommonHead from \"../layout/Head\";\nimport Cart from \"../layout/pages/Cart\";\nimport MainSectionWrapper from \"../layout\";\nimport { parseAllGoogleSpreadsheetPetitsAnimauxProductsResponse, } from '../graphql/products';\n\nconst PageTemplate = (props) => {\n  const products = parseAllGoogleSpreadsheetPetitsAnimauxProductsResponse(props.data);\n\n    return (\n      <MainSectionWrapper>\n        <Cart products={products} />\n      </MainSectionWrapper>\n    )\n};\n\nexport function Head(props) {\n    // const {\n    //     allGoogleSpreadsheetPetitsAnimauxProducts,\n    // } = props.data;\n    // const node = allGoogleSpreadsheetPetitsAnimauxProducts.nodes[0];\n\n    // const data = {\n    //     page: {\n    //         name: node.name,\n    //     }\n    // };\n\n    // return <CommonHead {...props} data={data} />;\n}\n\nexport const query = graphql`\nquery PetitsAnimauxProduct {\n  allGoogleSpreadsheetPetitsAnimauxProducts {\n    edges {\n      node {\n        id\n        title\n        description\n        price\n        currencyCode\n        quantity\n        tags\n        materials\n          image1Gatsby {\n            childImageSharp {\n              gatsbyImageData(width: 400)\n            }\n          }\n          image2Gatsby {\n            childImageSharp {\n              gatsbyImageData(width: 400)\n            }\n          }\n          image3Gatsby {\n            childImageSharp {\n              gatsbyImageData(width: 400)\n            }\n          }\n          image4Gatsby {\n            childImageSharp {\n              gatsbyImageData(width: 400)\n            }\n          }\n          image5Gatsby {\n            childImageSharp {\n              gatsbyImageData(width: 400)\n            }\n          }\n          image6Gatsby {\n            childImageSharp {\n              gatsbyImageData(width: 400)\n            }\n          }\n          image7Gatsby {\n            childImageSharp {\n              gatsbyImageData(width: 400)\n            }\n          }\n          image8Gatsby {\n            childImageSharp {\n              gatsbyImageData(width: 400)\n            }\n          }\n          image9Gatsby {\n            childImageSharp {\n              gatsbyImageData(width: 400)\n            }\n          }\n          image10Gatsby {\n            childImageSharp {\n              gatsbyImageData(width: 400)\n            }\n          }\n      }\n    }\n  }\n}\n`;\n\nexport default PageTemplate;"],"names":["props","React","Object","assign","className","children","V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","stripePromise","loadScript","params","Promise","resolve","reject","window","document","Stripe","console","warn","script","scripts","querySelectorAll","concat","i","length","test","src","findScript","queryString","advancedFraudSignals","createElement","headOrBody","head","body","Error","appendChild","injectScript","addEventListener","error","stripePromise$1","then","loadCalled","err","SHIPPING_PRICE_ID","lineItems","stripe","setStripe","async","stripeObj","_len","arguments","args","Array","_key","startTime","Date","now","maybeStripe","apply","undefined","_registerWrapper","name","version","registerWrapper","initStripe","loadStripe","fetchStripe","Button","disabled","onClick","redirectToCheckout","price","quantity","_toConsumableArray","mode","billingAddressCollection","shippingAddressCollection","allowedCountries","successUrl","cancelUrl","product","updateQuantity","priceId","id","GatsbyImage","image","gatsbyImages","alt","H2","H3","products","cart","useContext","cartContext","totalPrice","reduce","total","item","find","map","CartItem","key","Checkout","Head","parseAllGoogleSpreadsheetPetitsAnimauxProductsResponse","data","MainSectionWrapper","Cart"],"sourceRoot":""}